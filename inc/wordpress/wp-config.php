<?php
/**
 * Do not edit this file. Edit the config files found in {{ path('config-dir', 'wpconfig-dir') }}/ instead.
 */

require_once(__DIR__ . '/{{ path('vendor-dir', 'wpconfig-dir') }}/autoload.php');

// REMOTE_ADDR
if(isset($_SERVER['HTTP_CF_CONNECTING_IP'])) {
	$_SERVER['REMOTE_ADDR'] = $_SERVER['HTTP_CF_CONNECTING_IP'];
} elseif(isset($_SERVER['HTTP_X_FORWARDED_FOR'])) {
	$_SERVER['REMOTE_ADDR'] = $_SERVER['HTTP_X_FORWARDED_FOR'];
}

// HTTPS
if(isset($_SERVER['HTTP_CF_VISITOR'])) {
	$data = json_decode($_SERVER['HTTP_CF_VISITOR'], true);
	if(is_array($data) && isset($data['scheme']) && $data['scheme'] == 'https') {
		$_SERVER['HTTPS'] = 'on';
	}
} elseif(isset($_SERVER['HTTP_X_FORWARDED_PROTO'])) {
	if($_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https') {
		$_SERVER['HTTPS'] = 'on';
	}
}

require_once(__DIR__ . '/{{ path('config-dir', 'wpconfig-dir') }}/application.php');

if(!defined('WP_HOME')) {
	$scheme = 'http';
	if(isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on') {
		$scheme = 'https';
	}

	$domain = $_SERVER['HTTP_HOST'];

{% if path('home-dir', 'webroot')|length > 0 %}
	define('WP_HOME', $scheme . '://' . $domain . '/{{ path('home-dir', 'webroot') }}');
{% else %}
	define('WP_HOME', $scheme . '://' . $domain);
{% endif %}
}

if(!defined('WP_SITEURL')) {
{% if path('install-dir', 'home-dir')|length > 0 %}
	define('WP_SITEURL', WP_HOME . '/{{ path('install-dir', 'home-dir') }}');
{% else %}
	define('WP_SITEURL', WP_HOME);
{% endif %}
}

if(!defined('WP_CONTENT_DIR')) {
	define('WP_CONTENT_DIR', __DIR__ . '/{{ path('content-dir', 'wpconfig-dir') }}');
}

if(!defined('WP_CONTENT_URL')) {
	define('WP_CONTENT_URL', WP_HOME . '/{{ path('content-dir', 'home-dir') }}');
}

if(!defined('KINSTAMU_CUSTOM_MUPLUGIN_URL')) {
	define('KINSTAMU_CUSTOM_MUPLUGIN_URL', WP_CONTENT_URL . '/mu-plugins/kinsta-mu-plugins');
}

if(!defined('ABSPATH')) {
	define('ABSPATH', __DIR__ . '/{{ path('install-dir', 'wpconfig-dir') }}');
}

require_once(ABSPATH . 'wp-settings.php');
